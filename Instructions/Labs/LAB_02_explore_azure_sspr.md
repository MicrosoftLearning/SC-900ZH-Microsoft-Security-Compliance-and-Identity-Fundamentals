---
lab:
    title: '探索 Azure AD 自助式密码重置身份验证'
    module: '模块 2 第 2 课：描述 Microsoft 标识和访问管理解决方案的功能：描述 Azure AD 的不同身份验证方法'
---

# 实验室：探索 Azure AD 自助式密码重置身份验证

## 实验室场景

在本实验室中，你将以管理员身份完成启用自助式密码重置的过程。启用 SSPR 后，你将以用户身份完成注册 SSPR 和重置密码的过程。  最后，你将能够以管理员身份查看 SSPR 的审核日志以及使用情况数据和见解。

**预计用时**：15-20 分钟


#### 任务 1：  在此任务中，你将以管理员身份将现有用户 Adele Vance 添加到 SSPRSecurityUsers 组中。  此外，你还需重置用户密码，以便能够以用户身份进行首次登录并注册 SSPR。

1. 打开 Microsoft Edge。

2. 在地址栏中输入 **“portal.azure.com”** 并使用管理员凭据登录。
    1. 在“登录”窗口中，输入 **“admin@WWLxZZZZZZ.onmicrosoft.com”** （其中，ZZZZZZ 是实验室托管提供商提供的唯一租户 ID），然后选择 **“下一步”**。
    1. 输入管理员密码，该密码应由实验室托管提供商提供。选择 **“登录”**。
    1. 在提示保持登录状态时，选择 **“是”**。

3. 选择 **“Azure Active Directory”**。  

4. 在左侧导航面板中，选择 **“组”**。

5. 此时会显示现有组的列表。在“搜索组”字段中，输入 **“SSPR”**，然后从搜索结果中选择 **“SSPRSecurityGroupUsers”**。  这会将你转到该组的配置选项。

6. 从左侧导航窗格中，选择 **“成员”**。

7. 在页面顶部选择 **“+ 添加成员”**。  

8. 在“搜索”框中，输入 **“Adele”**。  用户 **Adele Vance** 出现在搜索框下方后，请选择该用户，然后按页面底部的 **“选择”**。

9. 选择屏幕右上角的 **“X”** 关闭“SSPRSecurityUsers”窗口，

10. 返回“Active Directory”页面，选择屏幕左上角“组”上方的 **Contoso**，返回“Contoso Azure Active Directory”页面。

11. 从左侧导航面板中，选择 **“用户”**。

12. 从用户列表中选择 **“Adele Vance”**。

13. 从页面顶部选择 **“重置密码”**。由于你之前没有以 Adele Vance 的身份登录，因此需要重置密码

14. 当密码重置窗口打开时，请选择 **“重置密码”**。  重要说明：请记下新密码，因为你在下一个任务中需要使用该密码才能以用户身份登录。

15. 选择页面右上角的 **“X”** 关闭密码重置窗口。

16. 选择页面右上角的 **“X”** 关闭“Adele Vance”窗口。

17. 选择页面右上角的 **“X”** 关闭“用户”窗口。

18. 将 Contoso 概述窗口保持打开状态，因为下一个任务中将使用该窗口。

#### 任务 2：在此任务中，你将以管理员身份学习如何为用户配置密码重置，包括配置要使用的身份验证方法类型。

1. 转到浏览器中打开的“Contoso - Microsoft Azure”选项卡。如果之前关闭了该选项卡，请打开浏览器页面，在地址栏中输入 portal.azure.com，然后选择“Azure Active Directory”。  你应在 Azure 门户中以管理员身份登录；如果没有，请重新登录。

2. 从左侧导航窗格中，选择 **“密码重置”**。  

3. 此时将显示自助式密码重置的属性。  确保列出的组 **SSPRSecurityUsers** 的 **“自助式重置”** 设置处于 **“已选中”** 状态。  将光标置于“选择组”旁边的信息图标上，并注意说明内容“定义有权重置自己密码的用户组”。必须将用户包含在组中，不能单独选择用户。  此外，如果更改组，则你选择的组将替换当前列出的组。  因此，建议只将用户添加到 SSPR 组中。  最后，请注意蓝色信息框“这些设置仅适用于组织中的最终用户。始终为管理员启用自助式密码重置功能，并且要求管理员使用两种身份验证方法重置其密码。

5. 从“密码重置”的左侧导航面板中，选择 **“身份验证方法”**。

6. 将“重置所需的方法数”设置为 **1**。请注意屏幕上的信息框。

7. 请注意用户可用的各种方法。  **“电子邮件”** 和 **“移动电话(仅限短信)”** 应已经选中；如果没有，请将其选中。

8. 从“密码重置”的左侧导航面板中，选择 **“注册”**。  

9. 确保将“要求用户在登录时注册”设置设为 **“是”**。  将“要求用户重新确认其身份验证信息的间隔天数”设为默认值“180”。   注意页面上的信息框。

10. 从“密码重置”的左侧导航面板中，选择 **“通知”**。  

11. 确保将“重置密码时向用户发送通知”设置设为 **“是”**。  将“当其他管理员重置其密码时向所有管理员发送通知”设置设为“否”。

12. 请注意“密码重置”导航窗格如何另外显示用于查看审核日志和“使用情况和见解”的选项。

13. 单击屏幕右上角电子邮件地址旁边的用户图标，从所有浏览器选项卡中**注销**。然后关闭所有浏览器窗口。


#### 任务 3：  在此任务中，你将以用户 Adele Vance 的身份完成自助式密码重置注册过程。  此任务要求你有权访问可接收短信的移动设备或可访问的个人电子邮件帐户。
 
1. 打开 Microsoft Edge。

2. 在地址栏中，输入 **“login.microsoftonline.com”**。

3. 以 Adele Vance 的身份登录：
    1. 在“登录”窗口中，输入 **“AdedleV@WWLxZZZZZZ.onmicrosoft.com”** （其中，ZZZZZZ 是实验室托管提供商提供的唯一租户 ID），然后选择 **“下一步”**。
    1. 输入你在之前的任务中记下的密码。选择 **“登录”**。
    1. 在提示保持登录状态时，选择 **“是”**

4. 由于这是你首次以 Adele Vance 的身份登录，因此系统会提示你重置密码。  输入旧密码。  对于新密码，请输入 **“SC900-Lab”**。在确认密码字段中输入 **“SC-900-Lab”**。  选择 **“登录”**。备注：我们使用此密码只是为了方便完成实验室。最佳做法通常是输入更安全的密码。

5. 弹出窗口显示需要更多信息。  这是因为作为 SSPRSecurityUsers 组的成员，配置要求其成员在登录时进行注册。按 **“下一步”** 按钮。  备注：  让用户自行进行注册的另一种方法是让管理员在添加用户时直接配置身份验证方法。这要求管理员知道并设置用户用于执行自助式密码重置的电话号码和电子邮件地址，然后重置用户密码。

6. “确保帐户安全”页面随即打开。  出现的窗口适用于电话身份验证方法，如果你没有能够接收短信的移动设备，请跳到下一步。  系统会提示你输入电话号码。确保已启用 **“通过短信向我发送验证码”** 选项。   输入可接收文本验证码的电话号码，然后按 **“下一步”按钮**。  这将打开一个新窗口，指示验证码刚已发送到你输入的手机。  输入你收到的验证码，然后选择 **“下一步”**。这将打开一个窗口，指示“成功”并显示默认登录方法。  选择 **“完成”**。  

7. 如果你已将 SSPR 配置为移动电话号码，请跳过此步骤。  还可以设置其他方法，如窗口左下角所示。  如果选择设置其他方法，请选择 **“我要设置其他方法”**，随即会出现一个弹出窗口，询问“你想使用哪种方法?” 从下拉列表中，选择你喜欢的方法（即 **“电子邮件”**），然后按 **“确认”** 按钮。  输入要使用的电子邮件，然后选择 **“下一步”**。  这将打开一个新窗口，指示验证码刚已发送到你输入的电子邮件。  访问你输入的电子邮件获取验证码。  输入你收到的验证码，然后选择 **“下一步”**。这将打开一个窗口，指示“成功”并显示默认登录方法。  选择 **“完成”**。

8. 现在已完成登录。你应该位于 Azure 门户登陆页面。  如果发现登录时间已过期，只需重新输入密码 SC900-Lab 即可。

9. 注销 Azure 门户并关闭浏览器窗口。 

#### 任务 4（可选）：在此任务中，你将以用户 Adele Vance 的身份完成重置密码的过程。

1. 打开 Microsoft Edge。

2. 在地址栏中，输入“login.microsoftonline.com”。

3. 通过输入电子邮件 **“AdeleV@WWLxZZZZ.onmicrosoft.com”** （其中 ZZZZZZ 是实验室托管提供商提供的唯一租户 ID）以 Adele Vance 的身份登录，然后按 **“下一步”** 按钮。你可能会看到“选择帐户”窗口打开，如果是这样，请选择 Adele Vance 的帐户。

4. 在“输入密码”窗口中，选择 **“忘记密码”**。 

5. “返回帐户”窗口随即打开。   验证 Adele Vance 的电子邮件 AdeleV@WWLxZZZZ.onmicrosoft.com 是否显示在电子邮件或用户名框中。  如果没有显示电子邮件，请输入。  

6. 在空白框中输入图像中显示的字符或音频中的单词。输入后，选择 **“下一步”**。

7. 屏幕会显示“返回帐户”>“验证步骤 1”，请选择新密码。保留默认设置 **“给我的手机发短信”**。  系统会提示你输入移动电话号码。  输入后，选择 **“文本”按钮**。  如果在注册期间选择了电子邮件，“返回帐户窗口”将指示“你将通过备用电子邮件地址收到一封包含验证码的电子邮件”。  选择 **“电子邮件”**。 

8. 输入验证码，然后按 **“下一步”**。

9. 在下一个屏幕中，系统会提示你输入新密码并确认新密码。  立即输入相应内容并按 **“完成”** 按钮。

10. 你将在屏幕上看到一条消息，提示密码已重置。  选择 **“单击此处”** 以使用新密码登录。

11. 从“选择帐户”信息框中，选择 **“AdeleV@WWLxZZZZZZ.onmicrosoft.com”**，输入新密码，然后按 **“登录”** 按钮。  如果系统提示你“保持登录状态”，请选择 **“否”**。

12. 你现在应位于 Azure 门户中。

13. 通过选择屏幕右上角电子邮件地址旁边的用户图标并选择 **“注销”** 进行注销。然后关闭所有浏览器窗口

#### 任务 5（可选）：  在此任务中，你将以管理员身份简要查看与密码重置相关的审核日志以及使用情况和见解数据。

1. 打开 Microsoft Edge。

2. 在地址栏中，输入 **“portal.azure.com”** 

3. 使用管理员凭据登录。
    1. 在“登录”窗口中，输入 **“admin@WWLxZZZZZZ.onmicrosoft.com”** （其中，ZZZZZZ 是实验室托管提供商提供的唯一租户 ID），然后选择 **“下一步”**。
    1. 输入管理员密码，该密码应由实验室托管提供商提供。选择 **“登录”**。
    1. 在提示保持登录状态时，选择 **“是”**。

4. 选择 **“Azure Active Directory”**。  

5. 从左侧导航窗格中，选择 **“密码重置”**。

6. 从左侧导航窗格中，选择 **“审核日志”**。  请注意可用信息和可用的筛选器。  另请注意，可以下载日志。  

7. 选择 **“下载”**。  请注意，可以将下载格式设置为 CSV 或 JSON。  选择屏幕右上角的 **“X”** 关闭窗口。

8. 从左侧导航窗格中，选择 **“使用情况和见解”**。

9. 请注意与注册有关的可用信息。  请注意，刷新此数据可能需要一些时间，即使在刷新之后，它也可能尚未反映上一任务的注册情况或使用情况数据。

10. 从页面顶部选择 **“使用情况”** 可查看自助式密码重置和帐户解锁的次数。  请注意，刷新此数据可能需要一些时间，即使在刷新之后，它也可能尚未反映上一任务的使用情况数据。

11. 关闭打开的浏览器选项卡。


#### 回顾
在本实验室中，你以管理员身份完成了启用自助式密码重置的过程。启用 SSPR 后，你以用户身份完成了注册 SSPR 和重置密码的过程。  最后，你以管理员身份了解了在何处查看 SSPR 的审核日志以及使用情况数据和见解。
